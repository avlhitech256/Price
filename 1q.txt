System.Data.SqlClient.SqlException не обработано
  Class=16
  ErrorCode=-2146232060
  HResult=-2146232060
  LineNumber=1
  Message=Cannot drop database "PriceList" because it is currently in use.
  Number=3702
  Procedure=""
  Server=(LocalDb)\MSSQLLocalDB
  Source=.Net SqlClient Data Provider
  State=4
  StackTrace:
       в System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
       в System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
       в System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
       в System.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
       в System.Data.SqlClient.SqlCommand.RunExecuteNonQueryTds(String methodName, Boolean async, Int32 timeout, Boolean asyncWrite)
       в System.Data.SqlClient.SqlCommand.InternalExecuteNonQuery(TaskCompletionSource`1 completion, String methodName, Boolean sendToPipe, Int32 timeout, Boolean& usedCache, Boolean asyncWrite, Boolean inRetry)
       в System.Data.SqlClient.SqlCommand.ExecuteNonQuery()
       в System.Data.Entity.Infrastructure.Interception.DbCommandDispatcher.<NonQuery>b__0(DbCommand t, DbCommandInterceptionContext`1 c)
       в System.Data.Entity.Infrastructure.Interception.InternalDispatcher`1.Dispatch[TTarget,TInterceptionContext,TResult](TTarget target, Func`3 operation, TInterceptionContext interceptionContext, Action`3 executing, Action`3 executed)
       в System.Data.Entity.Infrastructure.Interception.DbCommandDispatcher.NonQuery(DbCommand command, DbCommandInterceptionContext interceptionContext)
       в System.Data.Entity.SqlServer.SqlProviderServices.<>c__DisplayClass30.<DropDatabase>b__2e(DbConnection conn)
       в System.Data.Entity.SqlServer.SqlProviderServices.<>c__DisplayClass33.<UsingConnection>b__32()
       в System.Data.Entity.SqlServer.DefaultSqlExecutionStrategy.<>c__DisplayClass1.<Execute>b__0()
       в System.Data.Entity.SqlServer.DefaultSqlExecutionStrategy.Execute[TResult](Func`1 operation)
       в System.Data.Entity.SqlServer.DefaultSqlExecutionStrategy.Execute(Action operation)
       в System.Data.Entity.SqlServer.SqlProviderServices.UsingConnection(DbConnection sqlConnection, Action`1 act)
       в System.Data.Entity.SqlServer.SqlProviderServices.UsingMasterConnection(DbConnection sqlConnection, Action`1 act)
       в System.Data.Entity.SqlServer.SqlProviderServices.DropDatabase(SqlConnection sqlConnection, Nullable`1 commandTimeout, String databaseName)
       в System.Data.Entity.SqlServer.SqlProviderServices.DbDeleteDatabase(DbConnection connection, Nullable`1 commandTimeout, StoreItemCollection storeItemCollection)
       в System.Data.Entity.Core.Common.DbProviderServices.DeleteDatabase(DbConnection connection, Nullable`1 commandTimeout, StoreItemCollection storeItemCollection)
       в System.Data.Entity.Core.Objects.ObjectContext.DeleteDatabase()
       в System.Data.Entity.Internal.DatabaseOperations.Delete(ObjectContext objectContext)
       в System.Data.Entity.Database.Delete()
       в System.Data.Entity.DropCreateDatabaseIfModelChanges`1.InitializeDatabase(TContext context)
       в System.Data.Entity.Internal.InternalContext.<>c__DisplayClassf`1.<CreateInitializationAction>b__e()
       в System.Data.Entity.Internal.InternalContext.PerformInitializationAction(Action action)
       в System.Data.Entity.Internal.InternalContext.PerformDatabaseInitialization()
       в System.Data.Entity.Internal.LazyInternalContext.<InitializeDatabase>b__4(InternalContext c)
       в System.Data.Entity.Internal.RetryAction`1.PerformAction(TInput input)
       в System.Data.Entity.Internal.LazyInternalContext.InitializeDatabaseAction(Action`1 action)
       в System.Data.Entity.Internal.LazyInternalContext.InitializeDatabase()
       в System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType)
       в System.Data.Entity.Internal.Linq.InternalSet`1.Initialize()
       в System.Data.Entity.Internal.Linq.InternalSet`1.GetEnumerator()
       в System.Data.Entity.Infrastructure.DbQuery`1.System.Collections.Generic.IEnumerable<TResult>.GetEnumerator()
       в System.Collections.Generic.List`1..ctor(IEnumerable`1 collection)
       в System.Linq.Enumerable.ToList[TSource](IEnumerable`1 source)
       в Catalog.Model.CatalogModel.InitData() в D:\Projects\C#\Price\Client\PriceList\Catalog\Model\CatalogModel.cs:строка 144
       в Catalog.Model.CatalogModel..ctor(IDomainContext domainContext) в D:\Projects\C#\Price\Client\PriceList\Catalog\Model\CatalogModel.cs:строка 37
       в Catalog.ViewModel.CatalogViewModel..ctor(IDomainContext domainContext) в D:\Projects\C#\Price\Client\PriceList\Catalog\ViewModel\CatalogViewModel.cs:строка 46
       в PriceList.ViewModel.MainWindow.ViewModelFactory.<>c.<.ctor>b__2_0(IDomainContext x) в D:\Projects\C#\Price\Client\PriceList\PriceList\ViewModel\MainWindow\ViewModelFactory.cs:строка 26
       в PriceList.ViewModel.MainWindow.ViewModelFactory.Create(MenuItemName menuItemName) в D:\Projects\C#\Price\Client\PriceList\PriceList\ViewModel\MainWindow\ViewModelFactory.cs:строка 47
       в PriceList.ViewModel.MainWindow.ViewModelRouter.GetViewModel(MenuItemName menuItemName) в D:\Projects\C#\Price\Client\PriceList\PriceList\ViewModel\MainWindow\ViewModelRouter.cs:строка 40
       в PriceList.ViewModel.MainWindow.ViewFactory.GetView(MenuItemName menuItemName, Object oldView) в D:\Projects\C#\Price\Client\PriceList\PriceList\ViewModel\MainWindow\ViewFactory.cs:строка 63
       в PriceList.ViewModel.MainWindow.MainWindowViewModel.SetEntryControl(MenuChangedEventArgs args) в D:\Projects\C#\Price\Client\PriceList\PriceList\ViewModel\MainWindow\MainWindowViewModel.cs:строка 66
       в Common.Messenger.Implementation.MessengerCommand`1.Execute(Object parameter) в D:\Projects\C#\Price\Client\PriceList\Common\Messenger\Implementation\MessengerCommand.cs:строка 53
       в Common.Messenger.Implementation.Messenger.<>c__DisplayClass8_0`1.<Send>b__0(ICommand command) в D:\Projects\C#\Price\Client\PriceList\Common\Messenger\Implementation\Messenger.cs:строка 136
       в Common.Messenger.Implementation.Messenger.Send[T](CommandName commandType, T arg) в D:\Projects\C#\Price\Client\PriceList\Common\Messenger\Implementation\Messenger.cs:строка 149
       в PriceList.View.TopMenu.TopMenuControl.SetMouseUp(Object sender) в D:\Projects\C#\Price\Client\PriceList\PriceList\View\TopMenu\TopMenuControl.xaml.cs:строка 146
       в PriceList.View.TopMenu.TopMenuControl.MenuItem_OnClick(Object sender, RoutedEventArgs e) в D:\Projects\C#\Price\Client\PriceList\PriceList\View\TopMenu\TopMenuControl.xaml.cs:строка 170
       в System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs)
       в System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised)
       в System.Windows.UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args)
       в System.Windows.UIElement.RaiseEvent(RoutedEventArgs e)
       в System.Windows.Controls.MenuItem.InvokeClickAfterRender(Object arg)
       в System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
       в System.Windows.Threading.ExceptionWrapper.TryCatchWhen(Object source, Delegate callback, Object args, Int32 numArgs, Delegate catchHandler)
       в System.Windows.Threading.DispatcherOperation.InvokeImpl()
       в System.Windows.Threading.DispatcherOperation.InvokeInSecurityContext(Object state)
       в System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       в System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       в System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       в MS.Internal.CulturePreservingExecutionContext.Run(CulturePreservingExecutionContext executionContext, ContextCallback callback, Object state)
       в System.Windows.Threading.DispatcherOperation.Invoke()
       в System.Windows.Threading.Dispatcher.ProcessQueue()
       в System.Windows.Threading.Dispatcher.WndProcHook(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
       в MS.Win32.HwndWrapper.WndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam, Boolean& handled)
       в MS.Win32.HwndSubclass.DispatcherCallbackOperation(Object o)
       в System.Windows.Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs)
       в System.Windows.Threading.ExceptionWrapper.TryCatchWhen(Object source, Delegate callback, Object args, Int32 numArgs, Delegate catchHandler)
       в System.Windows.Threading.Dispatcher.LegacyInvokeImpl(DispatcherPriority priority, TimeSpan timeout, Delegate method, Object args, Int32 numArgs)
       в MS.Win32.HwndSubclass.SubclassWndProc(IntPtr hwnd, Int32 msg, IntPtr wParam, IntPtr lParam)
       в MS.Win32.UnsafeNativeMethods.DispatchMessage(MSG& msg)
       в System.Windows.Threading.Dispatcher.PushFrameImpl(DispatcherFrame frame)
       в System.Windows.Threading.Dispatcher.PushFrame(DispatcherFrame frame)
       в System.Windows.Application.RunDispatcher(Object ignore)
       в System.Windows.Application.RunInternal(Window window)
       в System.Windows.Application.Run(Window window)
       в System.Windows.Application.Run()
       в PriceList.App.Main()
       в System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
       в System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
       в Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
       в System.Threading.ThreadHelper.ThreadStart_Context(Object state)
       в System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       в System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
       в System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
       в System.Threading.ThreadHelper.ThreadStart()
  InnerException: 
